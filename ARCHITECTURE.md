# Gains App Architecture

This document provides a comprehensive overview of the database schema and system architecture for the Gains fitness and nutrition tracking app.

---

## ğŸ“Š Database Architecture

### Overview

Gains uses **Firebase Firestore** as its primary database, with **Firebase Storage** for media files, **Firebase Authentication** for user management, and **Firebase Functions** for serverless AI operations.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FIRESTORE DATABASE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         users (collection)                           â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚   â””â”€â”€ {userId} (document)                                           â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ profile/                                                 â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ data                                               â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ dailyLogs/                                               â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {YYYY-MM-DD}                                       â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ meals/                                                   â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {mealId}                                           â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ workouts/                                                â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {workoutId}                                        â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ workoutPlans/                                            â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {planId}                                           â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ dietaryPlans/                                            â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {planId}                                           â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ mealTemplates/                                           â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {templateId}                                       â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ exerciseTemplates/                                       â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {templateId}                                       â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ conversations/                                           â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {conversationId}                                   â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ streaks/                                                 â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ current                                            â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â”œâ”€â”€ achievements/                                            â”‚    â”‚
â”‚  â”‚         â”‚     â””â”€â”€ {achievementId}                                    â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â””â”€â”€ weightEntries/                                           â”‚    â”‚
â”‚  â”‚               â””â”€â”€ {entryId}                                          â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         posts (collection)                           â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚   â””â”€â”€ {postId} (document)                                           â”‚    â”‚
â”‚  â”‚         â”‚                                                            â”‚    â”‚
â”‚  â”‚         â””â”€â”€ (public community posts)                                 â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Collection Details

#### 1. Users Collection (`/users/{userId}`)

Root collection for all user-specific data. Each user has a document identified by their Firebase Auth UID.

---

#### 2. Profile (`/users/{userId}/profile/data`)

Stores user profile information, goals, and preferences.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UserProfile                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BASIC INFO                              â”‚
â”‚  name: String                            â”‚
â”‚  dateJoined: Timestamp                   â”‚
â”‚  weight: Double                          â”‚
â”‚  height: String                          â”‚
â”‚  gender: String                          â”‚
â”‚  useMetricUnits: Bool                    â”‚
â”‚                                          â”‚
â”‚  NUTRITION GOALS                         â”‚
â”‚  dailyCaloriesGoal: Int                  â”‚
â”‚  macros: {                               â”‚
â”‚    protein: Double                       â”‚
â”‚    carbs: Double                         â”‚
â”‚    fats: Double                          â”‚
â”‚  }                                       â”‚
â”‚  waterGoal: Double                       â”‚
â”‚                                          â”‚
â”‚  FITNESS GOALS                           â”‚
â”‚  primaryGoal: FitnessGoal?               â”‚
â”‚  targetWeight: Double?                   â”‚
â”‚  targetDate: Timestamp?                  â”‚
â”‚  trainingExperience: TrainingExperience? â”‚
â”‚  trainingSplit: TrainingSplit?           â”‚
â”‚  activityLevel: ActivityLevel?           â”‚
â”‚  preferredTrainingDays: [Weekday]?       â”‚
â”‚                                          â”‚
â”‚  DIET & LIFESTYLE                        â”‚
â”‚  dietType: DietType?                     â”‚
â”‚  allergies: [String]?                    â”‚
â”‚  dislikedFoods: [String]?                â”‚
â”‚  mealPattern: MealPattern?               â”‚
â”‚                                          â”‚
â”‚  COACHING PREFERENCES                    â”‚
â”‚  coachingStyle: CoachingStyle?           â”‚
â”‚  detailPreference: DetailPreference?     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Enums:**
- `FitnessGoal`: muscleGain, fatLoss, maintenance, endurance, strength, generalHealth
- `TrainingExperience`: beginner, intermediate, advanced
- `TrainingSplit`: fullBody, upperLower, pushPullLegs, bodyPart
- `ActivityLevel`: sedentary, lightlyActive, moderatelyActive, veryActive, extremelyActive
- `DietType`: balanced, keto, lowCarb, highProtein, vegan, vegetarian, paleo, mediterranean
- `MealPattern`: threeSquareMeals, intermittentFasting, frequentSmallMeals
- `CoachingStyle`: motivational, analytical, casual
- `DetailPreference`: brief, moderate, detailed

---

#### 3. Daily Logs (`/users/{userId}/dailyLogs/{YYYY-MM-DD}`)

Daily nutrition summary. Document ID is the date string for easy querying.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DailyLog                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String (YYYY-MM-DD)                 â”‚
â”‚  date: Timestamp                         â”‚
â”‚  calories: Int                           â”‚
â”‚  protein: Int                            â”‚
â”‚  carbs: Int                              â”‚
â”‚  fats: Int                               â”‚
â”‚  waterOunces: Int                        â”‚
â”‚  mealIds: [String]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 4. Meals (`/users/{userId}/meals/{mealId}`)

Individual meal/food entries with full nutrition data.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Food                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String                              â”‚
â”‚  name: String                            â”‚
â”‚  calories: Int                           â”‚
â”‚  protein: Double                         â”‚
â”‚  carbs: Double                           â”‚
â”‚  fats: Double                            â”‚
â”‚  loggedAt: Timestamp                     â”‚
â”‚  date: String (YYYY-MM-DD)               â”‚
â”‚  photoUrl: String? (optional)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 5. Workouts (`/users/{userId}/workouts/{workoutId}`)

Workout sessions with embedded exercises and sets.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Workout                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: UUID                                â”‚
â”‚  workoutId: String                       â”‚
â”‚  name: String                            â”‚
â”‚  date: Timestamp                         â”‚
â”‚  duration: TimeInterval?                 â”‚
â”‚  notes: String? (optional)               â”‚
â”‚  exercises: [                            â”‚
â”‚    {                                     â”‚
â”‚      id: UUID                            â”‚
â”‚      name: String                        â”‚
â”‚      restTime: TimeInterval?             â”‚
â”‚      notes: String?                      â”‚
â”‚      sets: [                             â”‚
â”‚        {                                 â”‚
â”‚          id: UUID                        â”‚
â”‚          reps: Int?                      â”‚
â”‚          weight: Double?                 â”‚
â”‚          duration: TimeInterval?         â”‚
â”‚          distance: Double?               â”‚
â”‚          completed: Bool                 â”‚
â”‚        }                                 â”‚
â”‚      ]                                   â”‚
â”‚    }                                     â”‚
â”‚  ]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 6. Workout Plans (`/users/{userId}/workoutPlans/{planId}`)

AI-generated or user-created workout programs.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             WorkoutPlan                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: UUID                                â”‚
â”‚  planId: String                          â”‚
â”‚  name: String                            â”‚
â”‚  description: String?                    â”‚
â”‚  goal: FitnessGoal                       â”‚
â”‚  difficulty: Difficulty                  â”‚
â”‚  durationWeeks: Int                      â”‚
â”‚  daysPerWeek: Int                        â”‚
â”‚  createdAt: Timestamp                    â”‚
â”‚  createdBy: PlanCreator (ai/user)        â”‚
â”‚  isActive: Bool                          â”‚
â”‚  isRetired: Bool                         â”‚
â”‚  retiredAt: Timestamp?                   â”‚
â”‚  startDate: Timestamp?                   â”‚
â”‚  endDate: Timestamp?                     â”‚
â”‚  workoutTemplates: [                     â”‚
â”‚    {                                     â”‚
â”‚      id: UUID                            â”‚
â”‚      name: String                        â”‚
â”‚      dayNumber: Int                      â”‚
â”‚      exercises: [                        â”‚
â”‚        {                                 â”‚
â”‚          id: UUID                        â”‚
â”‚          name: String                    â”‚
â”‚          targetSets: Int                 â”‚
â”‚          targetReps: String              â”‚
â”‚          restSeconds: Int?               â”‚
â”‚          notes: String?                  â”‚
â”‚          alternatives: [String]?         â”‚
â”‚        }                                 â”‚
â”‚      ]                                   â”‚
â”‚      notes: String?                      â”‚
â”‚    }                                     â”‚
â”‚  ]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 7. Dietary Plans (`/users/{userId}/dietaryPlans/{planId}`)

AI-generated or user-created meal plans.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            DietaryPlan                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: UUID                                â”‚
â”‚  planId: String                          â”‚
â”‚  name: String                            â”‚
â”‚  description: String?                    â”‚
â”‚  goal: FitnessGoal?                      â”‚
â”‚  dailyCalories: Int                      â”‚
â”‚  macros: {                               â”‚
â”‚    protein: Double                       â”‚
â”‚    carbs: Double                         â”‚
â”‚    fats: Double                          â”‚
â”‚  }                                       â”‚
â”‚  mealCount: Int                          â”‚
â”‚  createdAt: Timestamp                    â”‚
â”‚  createdBy: PlanCreator (ai/user)        â”‚
â”‚  isActive: Bool                          â”‚
â”‚  isRetired: Bool                         â”‚
â”‚  retiredAt: Timestamp?                   â”‚
â”‚  dietType: DietType?                     â”‚
â”‚  restrictions: [String]?                 â”‚
â”‚  durationWeeks: Int                      â”‚
â”‚  meals: [                                â”‚
â”‚    {                                     â”‚
â”‚      id: UUID                            â”‚
â”‚      dayName: String                     â”‚
â”‚      dayNumber: Int                      â”‚
â”‚      meals: [                            â”‚
â”‚        {                                 â”‚
â”‚          id: UUID                        â”‚
â”‚          name: String                    â”‚
â”‚          mealType: MealType              â”‚
â”‚          foods: [                        â”‚
â”‚            {                             â”‚
â”‚              name: String                â”‚
â”‚              quantity: String            â”‚
â”‚              calories: Int               â”‚
â”‚              protein: Double             â”‚
â”‚              carbs: Double               â”‚
â”‚              fats: Double                â”‚
â”‚            }                             â”‚
â”‚          ]                               â”‚
â”‚          calories: Int                   â”‚
â”‚          protein: Double                 â”‚
â”‚          carbs: Double                   â”‚
â”‚          fats: Double                    â”‚
â”‚          prepTime: Int?                  â”‚
â”‚          notes: String?                  â”‚
â”‚        }                                 â”‚
â”‚      ]                                   â”‚
â”‚      notes: String?                      â”‚
â”‚    }                                     â”‚
â”‚  ]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MealType Enum:** breakfast, morningSnack, lunch, afternoonSnack, dinner, eveningSnack

---

#### 8. Conversations (`/users/{userId}/conversations/{conversationId}`)

AI Coach chat history persistence.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ChatConversation               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: UUID                                â”‚
â”‚  title: String                           â”‚
â”‚  createdAt: Timestamp                    â”‚
â”‚  lastUpdated: Timestamp                  â”‚
â”‚  messages: [                             â”‚
â”‚    {                                     â”‚
â”‚      id: UUID                            â”‚
â”‚      content: String                     â”‚
â”‚      isUser: Bool                        â”‚
â”‚      timestamp: Timestamp                â”‚
â”‚    }                                     â”‚
â”‚  ]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 9. Meal Templates (`/users/{userId}/mealTemplates/{templateId}`)

Saved meal templates for quick logging.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            MealTemplate                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String                              â”‚
â”‚  mealTemplateId: String                  â”‚
â”‚  name: String                            â”‚
â”‚  calories: Int                           â”‚
â”‚  protein: Double                         â”‚
â”‚  carbs: Double                           â”‚
â”‚  fats: Double                            â”‚
â”‚  photoUrl: String? (optional)            â”‚
â”‚  createdAt: Timestamp                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 10. Exercise Templates (`/users/{userId}/exerciseTemplates/{templateId}`)

Custom exercise definitions (defaults stored in app).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ExerciseTemplate                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String                              â”‚
â”‚  templateId: String                      â”‚
â”‚  name: String                            â”‚
â”‚  category: String (enum)                 â”‚
â”‚  muscleGroups: [String]                  â”‚
â”‚  equipment: String? (optional)           â”‚
â”‚  instructions: String? (optional)        â”‚
â”‚  isDefault: Bool                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 11. Streaks (`/users/{userId}/streaks/current`)

Single document tracking user's logging streak.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Streak                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  currentStreak: Int                      â”‚
â”‚  longestStreak: Int                      â”‚
â”‚  lastLoggedDate: Timestamp?              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 12. Achievements (`/users/{userId}/achievements/{achievementId}`)

User's achievement progress and unlocks.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Achievement                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String                              â”‚
â”‚  name: String                            â”‚
â”‚  description: String                     â”‚
â”‚  iconName: String                        â”‚
â”‚  unlockedAt: Timestamp? (optional)       â”‚
â”‚  progress: Double (0.0 - 1.0)            â”‚
â”‚  target: Int? (optional)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 13. Community Posts (`/posts/{postId}`)

Public community posts (top-level collection for cross-user access).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CommunityPost                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id: String                              â”‚
â”‚  postId: String                          â”‚
â”‚  userId: String                          â”‚
â”‚  userName: String                        â”‚
â”‚  userAvatar: String? (optional)          â”‚
â”‚  timestamp: Timestamp                    â”‚
â”‚  text: String                            â”‚
â”‚  imageUrl: String? (optional)            â”‚
â”‚  calories: Int? (optional)               â”‚
â”‚  protein: Double? (optional)             â”‚
â”‚  carbs: Double? (optional)               â”‚
â”‚  fats: Double? (optional)                â”‚
â”‚  likes: [String] (user IDs)              â”‚
â”‚  likeCount: Int                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     User     â”‚       â”‚   DailyLog   â”‚       â”‚     Meal     â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â”‚  (Auth UID)  â”‚â”€â”€1:Nâ”€â”€â”‚  (per day)   â”‚â”€â”€1:Nâ”€â”€â”‚  (per meal)  â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                              â”‚
       â”‚                                              â”‚ uses
       â”‚ 1:1                                          â–¼
       â”‚                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                                       â”‚MealTemplate  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚              â”‚
â”‚   Profile    â”‚                               â”‚  (reusable)  â”‚
â”‚              â”‚                               â”‚              â”‚
â”‚  (settings)  â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Workout    â”‚â”€â”€1:Nâ”€â”€â”‚   Exercise   â”‚â”€â”€1:Nâ”€â”€â”‚ ExerciseSet  â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â”‚  (session)   â”‚       â”‚  (embedded)  â”‚       â”‚  (embedded)  â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â”‚ follows              â”‚ uses
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WorkoutPlan  â”‚       â”‚  Exercise    â”‚
â”‚              â”‚       â”‚  Template    â”‚
â”‚  (program)   â”‚       â”‚              â”‚
â”‚              â”‚       â”‚ (definition) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚DietaryPlan   â”‚â”€â”€1:Nâ”€â”€â”‚ MealPlanDay  â”‚â”€â”€1:Nâ”€â”€â”‚ PlannedMeal  â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â”‚  (program)   â”‚       â”‚  (per day)   â”‚       â”‚ (with foods) â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Streak    â”‚       â”‚ Achievement  â”‚       â”‚ Conversation â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â”‚  (1 per user)â”‚       â”‚  (N per user)â”‚       â”‚ (AI Chat)    â”‚
â”‚              â”‚       â”‚              â”‚       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Community Postâ”‚
â”‚              â”‚
â”‚  (public)    â”‚â”€â”€â”€â”€â”€â”€â”€â”€ likes â”€â”€â”€â”€â”€â”€â”€â”€â–¶ [User IDs]
â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Security Rules Summary

| Collection | Read | Write | Notes |
|------------|------|-------|-------|
| `/users/{userId}/*` | Owner only | Owner only | All user subcollections |
| `/posts/{postId}` | All authenticated | Owner only | Community posts |
| Everything else | Denied | Denied | Default deny |

---

## ğŸ—ï¸ System Architecture

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              GAINS iOS APP                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         PRESENTATION LAYER                           â”‚    â”‚
â”‚  â”‚                            (SwiftUI Views)                           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚  Home   â”‚  â”‚Workouts â”‚  â”‚Progress â”‚  â”‚Communityâ”‚  â”‚ Profile â”‚  â”‚    â”‚
â”‚  â”‚   â”‚  View   â”‚  â”‚  View   â”‚  â”‚  View   â”‚  â”‚  View   â”‚  â”‚  View   â”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚        â”‚            â”‚            â”‚            â”‚            â”‚        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚            â”‚            â”‚            â”‚            â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        â–¼            â–¼            â–¼            â–¼            â–¼        â”‚    â”‚
â”‚  â”‚                      VIEWMODEL LAYER                                â”‚    â”‚
â”‚  â”‚                    (ObservableObject)                               â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚  Home   â”‚  â”‚ Workout â”‚  â”‚Progress â”‚  â”‚Communityâ”‚  â”‚ Profile â”‚  â”‚    â”‚
â”‚  â”‚   â”‚ViewModelâ”‚  â”‚ViewModelâ”‚  â”‚ViewModelâ”‚  â”‚ViewModelâ”‚  â”‚ViewModelâ”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚        â”‚            â”‚            â”‚            â”‚            â”‚        â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                          â”‚    â”‚
â”‚  â”‚   â”‚AICoach  â”‚  â”‚Nutritionâ”‚                                          â”‚    â”‚
â”‚  â”‚   â”‚ViewModelâ”‚  â”‚ViewModelâ”‚                                          â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                          â”‚    â”‚
â”‚  â”‚        â”‚            â”‚                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚            â”‚                                                     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                       â–¼                               â”‚   â”‚
â”‚  â”‚                         SERVICE LAYER (Singletons)                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ Firestore   â”‚  â”‚    Auth     â”‚  â”‚  Storage    â”‚  â”‚  ChatGPT    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ Workout     â”‚  â”‚WorkoutPlan  â”‚  â”‚DietaryPlan  â”‚  â”‚ ChatStorage â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚ Exercise    â”‚  â”‚ ImageCache  â”‚  â”‚UserContext  â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚Template Svc â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           EXTERNAL SERVICES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚          â”‚
â”‚   â”‚    Firebase     â”‚   â”‚    Firebase     â”‚   â”‚    Firebase     â”‚          â”‚
â”‚   â”‚   Firestore     â”‚   â”‚      Auth       â”‚   â”‚    Storage      â”‚          â”‚
â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚   â”‚                 â”‚   â”‚                 â”‚                                 â”‚
â”‚   â”‚    Firebase     â”‚   â”‚   OpenAI API    â”‚                                 â”‚
â”‚   â”‚   Functions     â”‚   â”‚   (via Cloud    â”‚                                 â”‚
â”‚   â”‚   (us-east4)    â”‚   â”‚    Function)    â”‚                                 â”‚
â”‚   â”‚                 â”‚   â”‚                 â”‚                                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### MVVM Architecture Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚                           VIEW                                   â”‚
â”‚                        (SwiftUI)                                 â”‚
â”‚                                                                  â”‚
â”‚   â€¢ Declarative UI                                               â”‚
â”‚   â€¢ @StateObject for ViewModel                                   â”‚
â”‚   â€¢ @State for local UI state                                    â”‚
â”‚   â€¢ .task { } for async loading                                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ @Published properties
                           â”‚ async methods
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚                       VIEWMODEL                                  â”‚
â”‚                  (ObservableObject)                              â”‚
â”‚                                                                  â”‚
â”‚   â€¢ @MainActor for UI updates                                    â”‚
â”‚   â€¢ @Published for reactive state                                â”‚
â”‚   â€¢ Business logic                                               â”‚
â”‚   â€¢ Calls Services                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ async/await
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚                        SERVICE                                   â”‚
â”‚                      (Singleton)                                 â”‚
â”‚                                                                  â”‚
â”‚   â€¢ static let shared                                            â”‚
â”‚   â€¢ Firebase SDK calls                                           â”‚
â”‚   â€¢ Network requests                                             â”‚
â”‚   â€¢ Data encoding/decoding                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Codable
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚                         MODEL                                    â”‚
â”‚                   (Struct, Codable)                              â”‚
â”‚                                                                  â”‚
â”‚   â€¢ Data structures                                              â”‚
â”‚   â€¢ Identifiable for SwiftUI                                     â”‚
â”‚   â€¢ Computed properties                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Service Layer Details

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SERVICE LAYER                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     FirestoreService.shared                          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Daily Logs:                                                         â”‚    â”‚
â”‚  â”‚    â€¢ saveDailyLog() / fetchDailyLog() / fetchDailyLogsRange()       â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Meals:                                                              â”‚    â”‚
â”‚  â”‚    â€¢ saveMeal() / fetchMeals() / updateMeal() / deleteMeal()        â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Profile:                                                            â”‚    â”‚
â”‚  â”‚    â€¢ saveUserProfile() / fetchUserProfile()                          â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Templates:                                                          â”‚    â”‚
â”‚  â”‚    â€¢ saveMealTemplate() / fetchMealTemplates() / deleteMealTemplate()â”‚    â”‚
â”‚  â”‚    â€¢ saveExerciseTemplate() / fetchExerciseTemplates()               â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Workouts:                                                           â”‚    â”‚
â”‚  â”‚    â€¢ saveWorkout() / fetchWorkouts() / updateWorkout() / delete...   â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Workout Plans:                                                      â”‚    â”‚
â”‚  â”‚    â€¢ saveWorkoutPlan() / fetchWorkoutPlans() / updateWorkoutPlan()   â”‚    â”‚
â”‚  â”‚    â€¢ deleteWorkoutPlan()                                             â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Dietary Plans:                                                      â”‚    â”‚
â”‚  â”‚    â€¢ saveDietaryPlan() / fetchDietaryPlans() / updateDietaryPlan()   â”‚    â”‚
â”‚  â”‚    â€¢ deleteDietaryPlan()                                             â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Gamification:                                                       â”‚    â”‚
â”‚  â”‚    â€¢ updateStreak() / fetchStreak()                                  â”‚    â”‚
â”‚  â”‚    â€¢ updateAchievement() / fetchAchievements()                       â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Community:                                                          â”‚    â”‚
â”‚  â”‚    â€¢ createPost() / fetchPosts() / likePost() / deletePost()         â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      AuthService.shared                              â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ user: User? (current Firebase user)                               â”‚    â”‚
â”‚  â”‚  â€¢ isAuthenticated: Bool                                             â”‚    â”‚
â”‚  â”‚  â€¢ signIn() / signOut() / createAccount()                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     StorageService.shared                            â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ uploadMealImage() -> URL                                          â”‚    â”‚
â”‚  â”‚  â€¢ deletePhoto()                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     ChatGPTService                                   â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ sendMessage(messages) -> Response                                 â”‚    â”‚
â”‚  â”‚  â€¢ estimateFood(description, imageBase64) -> FoodEstimation          â”‚    â”‚
â”‚  â”‚  â€¢ generateWorkoutPlan(...) -> WorkoutPlan                           â”‚    â”‚
â”‚  â”‚  â€¢ generateDietaryPlan(...) -> DietaryPlan                           â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Uses Firebase Functions (aiChat) to call OpenAI API securely        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   WorkoutPlanService                                 â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ loadPlans() / savePlan() / deletePlan()                           â”‚    â”‚
â”‚  â”‚  â€¢ setActivePlan() / deactivatePlan()                                â”‚    â”‚
â”‚  â”‚  â€¢ retirePlan() / restorePlan()                                      â”‚    â”‚
â”‚  â”‚  â€¢ activePlan, plans, retiredPlans (Published)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   DietaryPlanService                                 â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ loadPlans() / savePlan() / deletePlan()                           â”‚    â”‚
â”‚  â”‚  â€¢ setActivePlan() / deactivatePlan()                                â”‚    â”‚
â”‚  â”‚  â€¢ retirePlan() / restorePlan()                                      â”‚    â”‚
â”‚  â”‚  â€¢ activePlan, plans, retiredPlans (Published)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   ChatStorageService.shared                          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ saveConversation() / loadAllConversations()                       â”‚    â”‚
â”‚  â”‚  â€¢ deleteConversation()                                              â”‚    â”‚
â”‚  â”‚  Persists AI Coach conversations to Firestore                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   UserContextService                                 â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ buildSystemPrompt() -> String                                     â”‚    â”‚
â”‚  â”‚  Aggregates user data for AI context:                                â”‚    â”‚
â”‚  â”‚    - Profile, goals, nutrition progress                              â”‚    â”‚
â”‚  â”‚    - Weekly nutrition/training summaries                             â”‚    â”‚
â”‚  â”‚    - Active workout/dietary plans                                    â”‚    â”‚
â”‚  â”‚    - Streak, achievements, meal templates                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  ExerciseTemplateService.shared                      â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ defaultExercises: [ExerciseTemplate]                              â”‚    â”‚
â”‚  â”‚  â€¢ getExercises(for category) -> [ExerciseTemplate]                  â”‚    â”‚
â”‚  â”‚  Provides 80+ pre-defined exercises with categories                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   ImageCacheService.shared                           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  â€¢ loadImage(url) -> UIImage?                                        â”‚    â”‚
â”‚  â”‚  NSCache-based image caching for meal photos                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### File Structure

```
Gains/
â”‚
â”œâ”€â”€ ğŸ“ Models/
â”‚   â”œâ”€â”€ Food.swift              # Food, DailyNutrition, UserProfile, CommunityPost
â”‚   â”œâ”€â”€ DailyLog.swift          # Daily nutrition summary
â”‚   â”œâ”€â”€ Workout.swift           # Workout session
â”‚   â”œâ”€â”€ Exercise.swift          # Exercise within workout
â”‚   â”œâ”€â”€ ExerciseSet.swift       # Set within exercise
â”‚   â”œâ”€â”€ ExerciseTemplate.swift  # Exercise definition
â”‚   â”œâ”€â”€ MealTemplate.swift      # Saved meal template
â”‚   â”œâ”€â”€ WorkoutPlan.swift       # Workout program with templates
â”‚   â”œâ”€â”€ DietaryPlan.swift       # Meal plan with daily meals
â”‚   â”œâ”€â”€ ChatConversation.swift  # AI chat history
â”‚   â”œâ”€â”€ Streak.swift            # Streak tracking
â”‚   â”œâ”€â”€ Achievement.swift       # Achievement definitions
â”‚   â”œâ”€â”€ NutritionSummary.swift  # Weekly nutrition stats
â”‚   â”œâ”€â”€ TrainingSummary.swift   # Weekly training stats
â”‚   â””â”€â”€ WeightTrend.swift       # Weight trend analysis
â”‚
â”œâ”€â”€ ğŸ“ ViewModels/
â”‚   â”œâ”€â”€ HomeViewModel.swift     # Nutrition tracking, streaks
â”‚   â”œâ”€â”€ WorkoutViewModel.swift  # Workout management
â”‚   â”œâ”€â”€ ProgressViewModel.swift # Progress charts
â”‚   â”œâ”€â”€ CommunityViewModel.swift# Social features
â”‚   â”œâ”€â”€ ProfileViewModel.swift  # User profile
â”‚   â”œâ”€â”€ AICoachViewModel.swift  # AI chat
â”‚   â””â”€â”€ NutritionViewModel.swift# Daily nutrition state
â”‚
â”œâ”€â”€ ğŸ“ Services/
â”‚   â”œâ”€â”€ FirestoreService.swift  # All Firestore operations
â”‚   â”œâ”€â”€ AuthService.swift       # Firebase Auth
â”‚   â”œâ”€â”€ StorageService.swift    # Firebase Storage
â”‚   â”œâ”€â”€ ChatGPTService.swift    # OpenAI integration via Firebase Functions
â”‚   â”œâ”€â”€ WorkoutService.swift    # Workout business logic
â”‚   â”œâ”€â”€ WorkoutPlanService.swift# Workout plan management
â”‚   â”œâ”€â”€ DietaryPlanService.swift# Dietary plan management
â”‚   â”œâ”€â”€ ChatStorageService.swift# AI conversation persistence
â”‚   â”œâ”€â”€ ExerciseTemplateService.swift # Default exercise library
â”‚   â”œâ”€â”€ ImageCacheService.swift # Image caching
â”‚   â”œâ”€â”€ UserContextService.swift# AI context builder
â”‚   â””â”€â”€ APIConfiguration.swift  # API configuration
â”‚
â”œâ”€â”€ ğŸ“ Views/
â”‚   â”œâ”€â”€ ğŸ“ Shared/
â”‚   â”‚   â”œâ”€â”€ ContentView.swift   # Root view
â”‚   â”‚   â””â”€â”€ TabBarView.swift    # Main tab navigation
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Auth/
â”‚   â”‚   â”œâ”€â”€ AuthenticationView.swift  # Login screen
â”‚   â”‚   â””â”€â”€ SignUpView.swift          # Registration screen
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Home/
â”‚   â”‚   â”œâ”€â”€ HomeView.swift      # Main dashboard
â”‚   â”‚   â”œâ”€â”€ FoodLoggingView.swift     # Log food with AI
â”‚   â”‚   â”œâ”€â”€ EditMealView.swift        # Edit logged meal
â”‚   â”‚   â”œâ”€â”€ MealCard.swift            # Meal display component
â”‚   â”‚   â”œâ”€â”€ MealTemplatesView.swift   # Saved meal templates
â”‚   â”‚   â”œâ”€â”€ StreakCard.swift          # Streak display
â”‚   â”‚   â””â”€â”€ UIImage+Base64.swift      # Image utilities
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Workouts/
â”‚   â”‚   â”œâ”€â”€ WorkoutListView.swift     # Workout history + plans tabs
â”‚   â”‚   â”œâ”€â”€ WorkoutDetailView.swift   # Single workout detail
â”‚   â”‚   â”œâ”€â”€ ActiveWorkoutView.swift   # Live workout tracking
â”‚   â”‚   â”œâ”€â”€ AddExerciseView.swift     # Add exercise to workout
â”‚   â”‚   â”œâ”€â”€ WorkoutPlansView.swift    # Workout plans list
â”‚   â”‚   â”œâ”€â”€ WorkoutPlanDetailView.swift # Single plan detail
â”‚   â”‚   â”œâ”€â”€ CreateWorkoutPlanView.swift # Manual plan creation
â”‚   â”‚   â””â”€â”€ GeneratePlanView.swift    # AI plan generation
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Nutrition/
â”‚   â”‚   â”œâ”€â”€ DietaryPlansView.swift    # Dietary plans list
â”‚   â”‚   â”œâ”€â”€ DietaryPlanDetailView.swift # Single plan detail
â”‚   â”‚   â”œâ”€â”€ CreateDietaryPlanView.swift # Manual plan creation
â”‚   â”‚   â””â”€â”€ GenerateDietaryPlanView.swift # AI plan generation
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Exercises/
â”‚   â”‚   â””â”€â”€ ExerciseListView.swift    # Exercise library browser
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Progress/
â”‚   â”‚   â”œâ”€â”€ ProgressView.swift        # Progress dashboard
â”‚   â”‚   â””â”€â”€ ğŸ“ Charts/
â”‚   â”‚       â”œâ”€â”€ CaloriesChartView.swift
â”‚   â”‚       â”œâ”€â”€ MacrosChartView.swift
â”‚   â”‚       â””â”€â”€ WeightChartView.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Community/
â”‚   â”‚   â”œâ”€â”€ CommunityView.swift       # Social feed
â”‚   â”‚   â””â”€â”€ CreatePostView.swift      # New post composer
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ Profile/
â”‚   â”‚   â”œâ”€â”€ ProfileView.swift         # User profile
â”‚   â”‚   â”œâ”€â”€ EditProfileView.swift     # Edit profile details
â”‚   â”‚   â”œâ”€â”€ GoalsSettingsView.swift   # Goals & macro settings
â”‚   â”‚   â””â”€â”€ AchievementsView.swift    # Achievements display
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ AICoach/
â”‚   â”‚   â””â”€â”€ AICoachView.swift         # AI chat interface
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ Settings/
â”‚       â””â”€â”€ SettingsView.swift        # App settings
â”‚
â”œâ”€â”€ ğŸ“ Theme/
â”‚   â”œâ”€â”€ colors.swift            # Color system (GainsDesign)
â”‚   â””â”€â”€ GainsAIApp.swift        # App entry point
â”‚
â”œâ”€â”€ ğŸ“ Utilities/
â”‚   â”œâ”€â”€ DateFormatter+Extensions.swift
â”‚   â”œâ”€â”€ WeightFormatter.swift
â”‚   â””â”€â”€ ImageUtilities.swift
â”‚
â”œâ”€â”€ ğŸ“ functions/               # Firebase Functions (Node.js)
â”‚   â””â”€â”€ index.js                # aiChat function for OpenAI
â”‚
â””â”€â”€ ğŸ“„ Configuration Files
    â”œâ”€â”€ GoogleService-Info.plist
    â”œâ”€â”€ firestore.rules
    â”œâ”€â”€ firestore.indexes.json
    â””â”€â”€ storage.rules
```

---

### Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TECHNOLOGY STACK                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  FRONTEND                          BACKEND                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚    SwiftUI      â”‚               â”‚    Firebase     â”‚                      â”‚
â”‚  â”‚    iOS 16+      â”‚               â”‚    Firestore    â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Swift Charts   â”‚               â”‚    Firebase     â”‚                      â”‚
â”‚  â”‚   (iOS 16+)     â”‚               â”‚      Auth       â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚    Combine      â”‚               â”‚    Firebase     â”‚                      â”‚
â”‚  â”‚  (Reactive)     â”‚               â”‚    Storage      â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Swift Async/   â”‚               â”‚    Firebase     â”‚                      â”‚
â”‚  â”‚     Await       â”‚               â”‚   Functions     â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                                    â”‚   OpenAI API    â”‚                      â”‚
â”‚                                    â”‚ (GPT-4 Vision)  â”‚                      â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â”‚  TOOLS                             DEPLOYMENT                                â”‚
â”‚  â”€â”€â”€â”€â”€                             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚   Xcode 16+     â”‚               â”‚  Firebase CLI   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Swift Package  â”‚               â”‚   App Store     â”‚                      â”‚
â”‚  â”‚    Manager      â”‚               â”‚    Connect      â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### AI Integration Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI INTEGRATION FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   iOS App       â”‚                                                        â”‚
â”‚  â”‚                 â”‚                                                        â”‚
â”‚  â”‚  AICoachView    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  FoodLogging    â”‚                                            â”‚          â”‚
â”‚  â”‚  GeneratePlan   â”‚                                            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚          â”‚
â”‚           â”‚                                                      â”‚          â”‚
â”‚           â”‚ 1. Build context                                     â”‚          â”‚
â”‚           â–¼                                                      â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚          â”‚
â”‚  â”‚UserContextServiceâ”‚                                            â”‚          â”‚
â”‚  â”‚                 â”‚                                            â”‚          â”‚
â”‚  â”‚ Aggregates:     â”‚                                            â”‚          â”‚
â”‚  â”‚ â€¢ User profile  â”‚                                            â”‚          â”‚
â”‚  â”‚ â€¢ Daily nutritionâ”‚                                           â”‚          â”‚
â”‚  â”‚ â€¢ Weekly summary â”‚                                           â”‚          â”‚
â”‚  â”‚ â€¢ Active plans  â”‚                                            â”‚          â”‚
â”‚  â”‚ â€¢ Streak/goals  â”‚                                            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚          â”‚
â”‚           â”‚                                                      â”‚          â”‚
â”‚           â”‚ 2. System prompt + user message                      â”‚          â”‚
â”‚           â–¼                                                      â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚          â”‚
â”‚  â”‚ ChatGPTService  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Firebase        â”‚                â”‚          â”‚
â”‚  â”‚                 â”‚  HTTPS  â”‚ Functions       â”‚                â”‚          â”‚
â”‚  â”‚ sendMessage()   â”‚         â”‚ (us-east4)      â”‚                â”‚          â”‚
â”‚  â”‚ estimateFood()  â”‚         â”‚                 â”‚                â”‚          â”‚
â”‚  â”‚ generatePlan()  â”‚         â”‚ aiChat()        â”‚                â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚          â”‚
â”‚                                       â”‚                          â”‚          â”‚
â”‚                                       â”‚ 3. Forward to OpenAI     â”‚          â”‚
â”‚                                       â–¼                          â”‚          â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚          â”‚
â”‚                              â”‚   OpenAI API    â”‚                â”‚          â”‚
â”‚                              â”‚                 â”‚                â”‚          â”‚
â”‚                              â”‚ GPT-4 / GPT-4V  â”‚                â”‚          â”‚
â”‚                              â”‚                 â”‚                â”‚          â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚          â”‚
â”‚                                       â”‚                          â”‚          â”‚
â”‚                                       â”‚ 4. Response              â”‚          â”‚
â”‚                                       â–¼                          â”‚          â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚          â”‚
â”‚                              â”‚ Parse Response  â”‚                â”‚          â”‚
â”‚                              â”‚                 â”‚                â”‚          â”‚
â”‚                              â”‚ â€¢ Chat: text    â”‚                â”‚          â”‚
â”‚                              â”‚ â€¢ Food: JSON    â”‚                â”‚          â”‚
â”‚                              â”‚ â€¢ Plan: JSON    â”‚                â”‚          â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚          â”‚
â”‚                                       â”‚                          â”‚          â”‚
â”‚                                       â”‚ 5. Update UI             â”‚          â”‚
â”‚                                       â–¼                          â”‚          â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚          â”‚
â”‚                              â”‚   App State     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                              â”‚                 â”‚                            â”‚
â”‚                              â”‚ @Published vars â”‚                            â”‚
â”‚                              â”‚ SwiftUI updates â”‚                            â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Key Features Summary

| Feature | Description | Key Files |
|---------|-------------|-----------|
| **Nutrition Tracking** | Log meals with AI estimation, track macros & calories | `HomeView`, `FoodLoggingView`, `ChatGPTService` |
| **Workout Logging** | Track exercises, sets, reps, and workout history | `WorkoutListView`, `ActiveWorkoutView`, `WorkoutViewModel` |
| **AI Workout Plans** | Generate personalized workout programs | `GeneratePlanView`, `WorkoutPlanService` |
| **AI Meal Plans** | Generate weekly meal plans based on goals | `GenerateDietaryPlanView`, `DietaryPlanService` |
| **AI Coach** | Context-aware chat for fitness/nutrition advice | `AICoachView`, `UserContextService` |
| **Progress Tracking** | Charts for calories, macros, and weight over time | `ProgressView`, `Charts/` |
| **Community** | Share progress and engage with other users | `CommunityView`, `CommunityViewModel` |
| **Achievements** | Gamification with streak tracking and badges | `AchievementsView`, `Achievement.swift` |

---

*Last updated: December 2024*
